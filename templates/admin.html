<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel</title>
</head>
<body>
    <h1>Admin Panel</h1>
    <h2>Configuration</h2>
    <form method="post">
        <label>Sender Email:</label><br>
        <input type="text" name="sender_email" value="{{ config.sender_email }}" required><br>
        <label>Password:</label><br>
        <input type="password" name="password" value="{{ config.password }}" required><br>
        <label>Recipient Email:</label><br>
        <input type="text" name="recipient_email" value="{{ config.recipient_email }}" required><br>
        <label>SMTP Server:</label><br>
        <input type="text" name="smtp_server" value="{{ config.smtp_server }}" required><br>
        <label>SMTP Port:</label><br>
        <input type="number" name="smtp_port" value="{{ config.smtp_port }}" required><br>
        <label>Start Time (HH:MM):</label><br>
        <input type="text" name="start_time" value="{{ config.start_time }}" required><br>
        <label>End Time (HH:MM):</label><br>
        <input type="text" name="end_time" value="{{ config.end_time }}" required><br>
        <label>Sound After Minutes:</label><br>
        <input type="number" name="sound_after_minutes" value="{{ config.sound_after_minutes }}" required><br>
        <label>Report If Longer Than Minutes:</label><br>
        <input type="number" name="report_if_longer_than_minutes" value="{{ config.report_if_longer_than_minutes }}" required><br>
        <label>Email If Not Pressed After Minutes:</label><br>
        <input type="number" name="email_if_not_pressed_after_minutes" value="{{ config.email_if_not_pressed_after_minutes }}" required><br>
        <label>Min Wait Between Alerts (seconds):</label><br>
        <input type="number" name="min_wait_between_alerts_seconds" value="{{ config.min_wait_between_alerts_seconds }}" required><br>
        <label>Max Wait Between Alerts (seconds):</label><br>
        <input type="number" name="max_wait_between_alerts_seconds" value="{{ config.max_wait_between_alerts_seconds }}" required><br>
        <label>Enable Random Sound:</label><br>
        <input type="checkbox" name="random_sound_enabled" {% if config.random_sound_enabled %}checked{% endif %}><br>
        <label>Random Sound Min Seconds:</label><br>
        <input type="number" name="random_sound_min_seconds" value="{{ config.random_sound_min_seconds }}" required><br>
        <label>Random Sound Max Seconds:</label><br>
        <input type="number" name="random_sound_max_seconds" value="{{ config.random_sound_max_seconds }}" required><br>
        <label>Expected Hash:</label><br>
        <input type="text" name="expected_hash" value="{{ config.expected_hash }}" required><br>
        <button type="submit">Save</button>
    </form>

    <h2>Trigger Manual Popup</h2>
    <form method="post" action="{{ url_for('trigger_popup') }}">
        <label>Message:</label><br>
        <select name="message_type" onchange="toggleCustomMessage(this)">
            {% for msg in config.predefined_messages %}
                <option value="{{ msg }}">{{ msg }}</option>
            {% endfor %}
            <option value="custom">Custom Message</option>
        </select><br>
        <div id="custom_message_div" style="display: none;">
            <label>Custom Message:</label><br>
            <input type="text" name="custom_message" placeholder="Enter your message"><br>
        </div>
        <label>Play Sound:</label>
        <input type="checkbox" name="play_sound" checked><br>
        <button type="submit">Trigger Popup</button>
    </form>

    <a href="{{ url_for('logs') }}">View Logs</a> |
    <a href="{{ url_for('get_notifications') }}">View Notifications</a> |
    <a href="{{ url_for('download_backup') }}">Download Latest Backup</a> |
    <a href="{{ url_for('logout') }}">Logout</a>

    <script>
        function toggleCustomMessage(select) {
            var customDiv = document.getElementById('custom_message_div');
            customDiv.style.display = select.value === 'custom' ? 'block' : 'none';
        }
    </script>
</body>
</html>
